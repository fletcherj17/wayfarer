{% extends 'base.html' %}
{% load static %}
{% block content %}
<head>
    <link rel="stylesheet" href="{% static 'css/city.css' %}">
  </head>
  
    <div class="row">
        
        <div class="col-sm-4" >
            <div class="container">
                <h3 > Cities</h3>
                {% for city in cities %}
                <a href="/cities/{{city.id}}/">
                <div class='card '>

                    <img class="mr-3" src="/static/{{city.url}}" alt="Generic placeholder image" width='64' height='64'> 
                    <h5 class="mt-0">{{ city.name }}</h5>
                
                </div>
                </a>    
                {% endfor %}
            </div>
        </div>
        
    <div class="col-sm-4" >
        <div class="container1">
            
            <div class="city-card">
                <h3>{{city.name}}</h3>
                <img class="mr-3" src="/static/{{city.url}}" alt="Generic placeholder image" width='250' height='150'>
           
            </div>
            <div class="city-card">
                <h3 class="post">Posts</h3>
             
                <button type="submit" class="btnadd" id="myInput" data-toggle="modal" data-backdrop="static" data-target="#exampleModal" >+</button>
              
            </div>
            {% for post in page %}
            <div class="card city">
                <div class="media">
                        <img class="mr-3" src="{% static 'images/sanfrancisco.jpeg' %}" alt="Generic placeholder image" width='64' height='64'>
                    <div class="media-body">
                    <a href="{% url 'show_post' post.id %}" class="title">{{ post.title }}</a>
                    <p>{{post.content}}</p>
                    </div>
                </div>
            </div>
            {% endfor %}
           
        </div>

        
    </div>
  
    <div class="pagination">
         <span class="step-links">
            
            {% if page.has_previous %}
           
            <a href="?page={{ page.previous_page_number }}">previous</a>
            
            {% endif %}
            
            <span class="current">
                Page {{ page.number }} of {{ page.paginator.num_pages }}
            </span>
            
            {% if page.has_next %}
            <a href="?page={{ page.next_page_number }}">next</a>
            
            {% endif %}
            </ul>
            </nav>
        </span>
    </div>
 
</div>
<!-- Modal -->
<div class="modal fade" id="exampleModal" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel" aria-hidden="true">
    <div class="modal-dialog">
    <div class="modal-content">
        <div class="modal-header">
        <h5 class="modal-title" id="exampleModalLabel">Create New Post</h5>
        <button type="button" class="close" data-dismiss="modal" aria-label="Close">
            <span aria-hidden="true">&times;</span>
        </button>
        </div>
        <div class="modal-body">
            <form action="{% url 'show_city' city.id %}" method="POST" id="loginForm">
                {% csrf_token %}
                <div class="form-group row">
                    <label for="inputPassword" class="col-sm-2 col-form-label">Title</label>
                    <div class="col-sm-10">
                       
                      <input type="text" class="form-control" id="inputPassword" placeholder="Title" name="title">
                      {% if error %}
                      <p>{{error}}</p>
                      {% endif %}
                    </div>
                </div>
                <div class="form-group row">
                      <label for="inputPassword" class="col-sm-2 col-form-label">Content</label>
                      <div class="col-sm-10">  
                      <input type="textarea" class="form-control" id="inputPassword" placeholder="Content" name="content">
                      </div>
                    </div>
                    <input type="submit" class="btn" value="Create Post">
                </div>
                </form>
            
            
        </div>
        
    </div>
    
    </div>
    
</div>
<!-- End  Modal -->
{% if error%}
<script>
    $("#exampleModal").modal('show')
</script>
{% endif %}
{% endblock %} 